<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>slot</title>
  <script src="https://d3js.org/d3.v6.min.js"></script>
</head>
<body style="margin-left: 100px;">
  <svg id="mainsvg" width="4200" height="3600"  class="svgs" :style="background-color: #ffffff;"></svg>
  <button type="button" id="GHOST" onclick="GHOST()">Head</button>
  <button type="button" id="CASPER" onclick="Casper()">Checkpoint</button>
  <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
	<style>
	.circle1 {
	  fill: #AFEEEE;
  	fill-opacity: 0.2;
		stroke: #000000;
	  stroke-width: 1px;
	}
	.circle2 {
	  fill: #ADD8E6;
  	fill-opacity: 0.4;
		stroke: #000000;
		stroke-width: 1px;
	}
	.circle3 {
	   fill: #87CECB;
	   fill-opacity: 0.6;
	   stroke: #000000;
	   stroke-width: 1px;
	}
	.leaf0 {
	   fill: #FF99CC;
	   fill-opacity: 0.95;
	   stroke: #000000;
	   stroke-width:1.2px;
	}
	.tooltip{
		position:absolute;
		width:auto;
		height:auto;
		background-color: white;
		font-size: 25px;
		text-align: center;
	}
	.tooltip1{
		position:absolute;
		width:auto;
		height:auto;
		background-color: white;
		font-size: 40px;
		text-align: center;
	}
	.tooltip2{
		position:absolute;
		width:auto;
		height:auto;
		background-color: white;
		font-size: 45px;
		text-align: left;
		white-space: pre;
	}
	.text1{
		white-space: pre;
	}
	.tooltip3{
		position:absolute;
		width:auto;
		height:auto;
		background-color: white;
		font-size: 25px;
		text-align: center;
	}
	</style>
  <script >
    let svg = d3.select('svg');
    const width = (+svg.attr('width')-200)/2;
    const height = (+svg.attr('height')-400)/2;
    const margin = { top: 100, right: 90, bottom: 60, left: 90 };
    const innerWidth = width - margin.left - margin.right;
    const innerHeight = height - margin.top - margin.bottom;
    const g = svg.append('g').attr('id', 'maingroup')
      .attr('transform', `translate(${margin.left},${margin.top})`);

    var attestations = eval('{{attestation |safe}}');
    console.log(attestations);

//设置坐标轴
const xscale = d3.scaleLinear()
  .domain([0,32])
  .range([0, innerWidth]);

const xaxis = d3.axisBottom(xscale)
  .ticks(32)
  .tickSize(-10)
  .tickPadding(-50);

g.append('g').call(xaxis)
  .attr('id', 'xaxis');

var slot_total = []

var draw = d3.select('g').append('g')
  .selectAll('rect').data(attestations).enter()
  .attr('transform',function(d){
    return `translate(${xscale(j)+10},${yscale(i)+10})`;
  })
  .append('rect').data()
  .attr('class', 'datarect')
  .attr('width', 50)//长宽待定
  .attr('height', 50)
  .attr('fill', d => d3.interpolateYlOrRd(color(d)))
  .attr('opacity', 0.9)

</script>

</body>
</html>
